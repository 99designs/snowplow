/*
 * SnowPlow - The worldâ€™s most powerful web analytics platform
 *
 * @description JavaScript tracking client for SnowPlow
 * @version 0.4
 * @author Alex Dean, Anthon Pang
 */
if(!this.JSON2){this.JSON2={}}(function(){function d(f){return f<10?"0"+f:f}function l(n,m){var f=Object.prototype.toString.apply(n);if(f==="[object Date]"){return isFinite(n.valueOf())?n.getUTCFullYear()+"-"+d(n.getUTCMonth()+1)+"-"+d(n.getUTCDate())+"T"+d(n.getUTCHours())+":"+d(n.getUTCMinutes())+":"+d(n.getUTCSeconds())+"Z":null}if(f==="[object String]"||f==="[object Number]"||f==="[object Boolean]"){return n.valueOf()}if(f!=="[object Array]"&&typeof n.toJSON==="function"){return n.toJSON(m)}return n}var c=new RegExp("[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]","g"),e='\\\\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]',i=new RegExp("["+e,"g"),j,b,k={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},h;
function a(f){i.lastIndex=0;return i.test(f)?'"'+f.replace(i,function(m){var n=k[m];return typeof n==="string"?n:"\\u"+("0000"+m.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+f+'"'}function g(s,p){var n,m,t,f,q=j,o,r=p[s];if(r&&typeof r==="object"){r=l(r,s)}if(typeof h==="function"){r=h.call(p,s,r)}switch(typeof r){case"string":return a(r);case"number":return isFinite(r)?String(r):"null";case"boolean":case"null":return String(r);case"object":if(!r){return"null"}j+=b;o=[];if(Object.prototype.toString.apply(r)==="[object Array]"){f=r.length;for(n=0;n<f;n+=1){o[n]=g(n,r)||"null"}t=o.length===0?"[]":j?"[\n"+j+o.join(",\n"+j)+"\n"+q+"]":"["+o.join(",")+"]";j=q;return t}if(h&&typeof h==="object"){f=h.length;for(n=0;n<f;n+=1){if(typeof h[n]==="string"){m=h[n];t=g(m,r);if(t){o.push(a(m)+(j?": ":":")+t)}}}}else{for(m in r){if(Object.prototype.hasOwnProperty.call(r,m)){t=g(m,r);if(t){o.push(a(m)+(j?": ":":")+t)}}}}t=o.length===0?"{}":j?"{\n"+j+o.join(",\n"+j)+"\n"+q+"}":"{"+o.join(",")+"}";j=q;
return t}}if(typeof JSON2.stringify!=="function"){JSON2.stringify=function(o,m,n){var f;j="";b="";if(typeof n==="number"){for(f=0;f<n;f+=1){b+=" "}}else{if(typeof n==="string"){b=n}}h=m;if(m&&typeof m!=="function"&&(typeof m!=="object"||typeof m.length!=="number")){throw new Error("JSON.stringify")}return g("",{"":o})}}if(typeof JSON2.parse!=="function"){JSON2.parse=function(o,f){var n;function m(s,r){var q,p,t=s[r];if(t&&typeof t==="object"){for(q in t){if(Object.prototype.hasOwnProperty.call(t,q)){p=m(t,q);if(p!==undefined){t[q]=p}else{delete t[q]}}}}return f.call(s,r,t)}o=String(o);c.lastIndex=0;if(c.test(o)){o=o.replace(c,function(p){return"\\u"+("0000"+p.charCodeAt(0).toString(16)).slice(-4)})}if((new RegExp("^[\\],:{}\\s]*$")).test(o.replace(new RegExp('\\\\(?:["\\\\/bfnrt]|u[0-9a-fA-F]{4})',"g"),"@").replace(new RegExp('"[^"\\\\\n\r]*"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?',"g"),"]").replace(new RegExp("(?:^|:|,)(?:\\s*\\[)+","g"),""))){n=eval("("+o+")");
return typeof f==="function"?m({"":n},""):n}throw new SyntaxError("JSON.parse")}}}());var _snaq=_snaq||[],SnowPlow=SnowPlow||(function(){var f,a={},p=document,c=navigator,A=screen,x=window,m=false,v=[],h=x.encodeURIComponent,w=x.decodeURIComponent,d=unescape,B,D;function r(i){return typeof i!=="undefined"}function n(i){return typeof i==="function"}function z(i){return typeof i==="object"}function j(i){return typeof i==="string"||i instanceof String}function G(){var L,N,M;for(L=0;L<arguments.length;L+=1){M=arguments[L];N=M.shift();if(j(N)){B[N].apply(B,M)}else{N.apply(B,M)}}}function J(N,M,L,i){if(N.addEventListener){N.addEventListener(M,L,i);return true}if(N.attachEvent){return N.attachEvent("on"+M,L)}N["on"+M]=L}function E(M,P){var L="",O,N;for(O in a){if(Object.prototype.hasOwnProperty.call(a,O)){N=a[O][M];if(n(N)){L+=N(P)}}}return L}function H(){var i;E("unload");if(f){do{i=new Date()}while(i.getTimeAlias()<f)}}function F(){var L;if(!m){m=true;E("load");for(L=0;L<v.length;L++){v[L]()
}}return true}function k(){var L;if(p.addEventListener){J(p,"DOMContentLoaded",function i(){p.removeEventListener("DOMContentLoaded",i,false);F()})}else{if(p.attachEvent){p.attachEvent("onreadystatechange",function i(){if(p.readyState==="complete"){p.detachEvent("onreadystatechange",i);F()}});if(p.documentElement.doScroll&&x===x.top){(function i(){if(!m){try{p.documentElement.doScroll("left")}catch(M){setTimeout(i,0);return}F()}}())}}}if((new RegExp("WebKit")).test(c.userAgent)){L=setInterval(function(){if(m||/loaded|complete/.test(p.readyState)){clearInterval(L);F()}},10)}J(x,"load",F,false)}function s(){var i="";try{i=x.top.document.referrer}catch(M){if(x.parent){try{i=x.parent.document.referrer}catch(L){i=""}}}if(i===""){i=p.referrer}return i}function g(i){var M=new RegExp("^([a-z]+):"),L=M.exec(i);return L?L[1]:null}function b(i){var M=new RegExp("^(?:(?:https?|ftp):)/*(?:[^@]+@)?([^:/#]+)"),L=M.exec(i);return L?L[1]:i}function y(M,L){var P=new RegExp("^(?:https?|ftp)(?::/*(?:[^?]+)[?])([^#]+)"),O=P.exec(M),N=new RegExp("(?:^|&)"+L+"=([^&]*)"),i=O?N.exec(O[1]):0;
return i?w(i[1]):""}function l(Q,N,M,P,L,O){var i;if(M){i=new Date();i.setTime(i.getTime()+M)}p.cookie=Q+"="+h(N)+(M?";expires="+i.toGMTString():"")+";path="+(P||"/")+(L?";domain="+L:"")+(O?";secure":"")}function e(M){var i=new RegExp("(^|;)[ ]*"+M+"=([^;]*)"),L=i.exec(p.cookie);return L?w(L[2]):0}function o(i){return d(h(i))}function I(ab){var N=function(W,i){return(W<<i)|(W>>>(32-i))},ac=function(ai){var ah="",ag,W;for(ag=7;ag>=0;ag--){W=(ai>>>(ag*4))&15;ah+=W.toString(16)}return ah},Q,ae,ad,M=[],U=1732584193,S=4023233417,R=2562383102,P=271733878,O=3285377520,aa,Z,Y,X,V,af,L,T=[];ab=o(ab);L=ab.length;for(ae=0;ae<L-3;ae+=4){ad=ab.charCodeAt(ae)<<24|ab.charCodeAt(ae+1)<<16|ab.charCodeAt(ae+2)<<8|ab.charCodeAt(ae+3);T.push(ad)}switch(L&3){case 0:ae=2147483648;break;case 1:ae=ab.charCodeAt(L-1)<<24|8388608;break;case 2:ae=ab.charCodeAt(L-2)<<24|ab.charCodeAt(L-1)<<16|32768;break;case 3:ae=ab.charCodeAt(L-3)<<24|ab.charCodeAt(L-2)<<16|ab.charCodeAt(L-1)<<8|128;break}T.push(ae);while((T.length&15)!==14){T.push(0)
}T.push(L>>>29);T.push((L<<3)&4294967295);for(Q=0;Q<T.length;Q+=16){for(ae=0;ae<16;ae++){M[ae]=T[Q+ae]}for(ae=16;ae<=79;ae++){M[ae]=N(M[ae-3]^M[ae-8]^M[ae-14]^M[ae-16],1)}aa=U;Z=S;Y=R;X=P;V=O;for(ae=0;ae<=19;ae++){af=(N(aa,5)+((Z&Y)|(~Z&X))+V+M[ae]+1518500249)&4294967295;V=X;X=Y;Y=N(Z,30);Z=aa;aa=af}for(ae=20;ae<=39;ae++){af=(N(aa,5)+(Z^Y^X)+V+M[ae]+1859775393)&4294967295;V=X;X=Y;Y=N(Z,30);Z=aa;aa=af}for(ae=40;ae<=59;ae++){af=(N(aa,5)+((Z&Y)|(Z&X)|(Y&X))+V+M[ae]+2400959708)&4294967295;V=X;X=Y;Y=N(Z,30);Z=aa;aa=af}for(ae=60;ae<=79;ae++){af=(N(aa,5)+(Z^Y^X)+V+M[ae]+3395469782)&4294967295;V=X;X=Y;Y=N(Z,30);Z=aa;aa=af}U=(U+aa)&4294967295;S=(S+Z)&4294967295;R=(R+Y)&4294967295;P=(P+X)&4294967295;O=(O+V)&4294967295}af=ac(U)+ac(S)+ac(R)+ac(P)+ac(O);return af.toLowerCase()}function C(M,i,L){if(M==="translate.googleusercontent.com"){if(L===""){L=i}i=y(i,"u");M=b(i)}else{if(M==="cc.bingj.com"||M==="webcache.googleusercontent.com"||M.slice(0,5)==="74.6."){i=p.links[0].href;M=b(i)}}return[M,i,L]}function t(L){var i=L.length;
if(L.charAt(--i)==="."){L=L.slice(0,i)}if(L.slice(0,2)==="*."){L=L.slice(1)}return L}function K(L){if(!j(L)){L=L.text||"";var i=p.getElementsByTagName("title");if(i&&r(i[0])){L=i[0].text}}return L}function u(ap){var at=C(p.domain,x.location.href,s()),aa=t(at[0]),Z=at[1],aG=at[2],O="GET",ae=M(ap),aV="",aO,aU=p.title,ak="7z|aac|ar[cj]|as[fx]|avi|bin|csv|deb|dmg|doc|exe|flv|gif|gz|gzip|hqx|jar|jpe?g|js|mp(2|3|4|e?g)|mov(ie)?|ms[ip]|od[bfgpst]|og[gv]|pdf|phps|png|ppt|qtm?|ra[mr]?|rpm|sea|sit|tar|t?bz2?|tgz|torrent|txt|wav|wm[av]|wpd||xls|xml|z|zip",aH=[aa],S=[],aI=[],aL=[],ad=500,N,an,aq,aJ="_sp_",W,aF,P,aw,aW=63072000000,ah=1800000,ac=15768000000,U=window.navigator.userLanguage||window.navigator.language,aS=p.location.protocol==="https",av={},aA=false,X=false,ab,aR,ay,aN=I,aE,am;function aP(aX){var aY;if(aq){aY=new RegExp("#.*");return aX.replace(aY,"")}return aX}function aj(aZ,aX){var a0=g(aX),aY;if(a0){return aX}if(aX.slice(0,1)==="/"){return g(aZ)+"://"+b(aZ)+aX}aZ=aP(aZ);if((aY=aZ.indexOf("?"))>=0){aZ=aZ.slice(0,aY)
}if((aY=aZ.lastIndexOf("/"))!==aZ.length-1){aZ=aZ.slice(0,aY+1)}return aZ+aX}function az(a0){var aY,aX,aZ;for(aY=0;aY<aH.length;aY++){aX=t(aH[aY].toLowerCase());if(a0===aX){return true}if(aX.slice(0,1)==="."){if(a0===aX.slice(1)){return true}aZ=a0.length-aX.length;if((aZ>0)&&(a0.slice(aZ)===aX)){return true}}}return false}function i(aX){var aY=new Image(1,1);aY.onload=function(){};aY.src=ae+(ae.indexOf("?")<0?"?":"&")+aX}function aQ(aZ,aY){var aX=new Date();if(!P){i(aZ);f=aX.getTime()+aY}}function T(aX){return aJ+aX+"."+aV+"."+aE}function aC(){var aX=T("testcookie");if(!r(c.cookieEnabled)){l(aX,"1");return e(aX)==="1"?"1":"0"}return c.cookieEnabled?"1":"0"}function al(){aE=aN((W||aa)+(aF||"/")).slice(0,4)}function V(){var aX=new Date();ab=aX.getTime()}function Q(a1,aY,aX,a0,aZ){l(T("id"),a1+"."+aY+"."+aX+"."+a0+"."+aZ,aW,aF,W,aS)}function R(){var aY=new Date(),aX=Math.round(aY.getTime()/1000),a0=e(T("id")),aZ;if(a0){aZ=a0.split(".");aZ.unshift("0")}else{if(!am){am=aN((c.userAgent||"")+(c.platform||"")+JSON2.stringify(av)+aX).slice(0,16)
}aZ=["1",am,aX,0,aX,""]}return aZ}function au(aY,bf){var bd,aX=new Date(),a3=Math.round(aX.getTime()/1000),bh,be,a0,a9,bb,a2,a1,bc,aZ=1024,bi,a5,a8=T("id"),a4=T("ses"),ba=R(),a7=e(a4),bg=aO||Z,a6;if(P){l(a8,"",-1,aF,W);l(a4,"",-1,aF,W);return""}bh=ba[0];be=ba[1];a9=ba[2];a0=ba[3];bb=ba[4];a2=ba[5];if(!a7){a0++;a2=bb}aY+="&tid="+String(Math.random()).slice(2,8)+"&uid="+be+"&vid="+a0+"&lang="+U+(aG.length?"&refr="+h(aP(aG)):"");for(bd in av){if(Object.prototype.hasOwnProperty.call(av,bd)){a6=(bd==="res"||bd==="cookie")?"&":"&f_";aY+=a6+bd+"="+av[bd]}}aY+="&url="+h(aP(window.location));Q(be,a9,a0,a3,a2);l(a4,"*",ah,aF,W,aS);aY+=E(bf);return aY}function M(aX){return("https:"==document.location.protocol?"https":"http")+"://"+aX+".cloudfront.net/ice.png"}function aD(aZ,a2,aX,a1,a0){var aY="&ev_ca="+h(aZ)+"&ev_ac="+h(a2);if(String(aX).length){aY+="&ev_la="+h(aX)}if(String(a1).length){aY+="&ev_pr="+h(a1)}if(String(a0).length){aY+="&ev_va="+h(a0)}aY=au(aY,"event");aQ(aY,ad)}function ao(a1,aX,aZ,aY){var a0="";
a0+="&ad_ba="+h(a1);if(String(aX).length){a0+="&ad_ca="+h(aX)}if(String(aZ).length){a0+="&ad_ad="+h(aZ)}if(String(aY).length){a0+="&ad_uid="+h(aY)}a0=au(a0,configCustomData,"adimp");aQ(a0,ad)}function L(a0){var aX=new Date(),aZ=au("page="+h(K(a0||aU)),"log");aQ(aZ,ad);if(N&&an&&!X){X=true;J(p,"click",V);J(p,"mouseup",V);J(p,"mousedown",V);J(p,"mousemove",V);J(p,"mousewheel",V);J(x,"DOMMouseScroll",V);J(x,"scroll",V);J(p,"keypress",V);J(p,"keydown",V);J(p,"keyup",V);J(x,"resize",V);J(x,"focus",V);J(x,"blur",V);ab=aX.getTime();setTimeout(function aY(){var a1=new Date(),a2;if((ab+an)>a1.getTime()){if(N<a1.getTime()){a2=au("ping=1","ping");aQ(a2,ad)}setTimeout(aY,an)}},an)}}function ai(aY,aX){var aZ=au(aX+"="+h(aP(aY)),"link");aQ(aZ,ad)}function aK(aY,aX){if(aY!==""){return aY+aX.charAt(0).toUpperCase()+aX.slice(1)}return aX}function ar(a2){var a1,aX,a0=["","webkit","ms","moz"],aZ;if(!aw){for(aX=0;aX<a0.length;aX++){aZ=a0[aX];if(Object.prototype.hasOwnProperty.call(p,aK(aZ,"hidden"))){if(p[aK(aZ,"visibilityState")]==="prerender"){a1=true
}break}}}if(a1){J(p,aZ+"visibilitychange",function aY(){p.removeEventListener(aZ+"visibilitychange",aY,false);a2()});return}a2()}function aB(aZ,aY){var a0,aX="(^| )(piwik[_-]"+aY;if(aZ){for(a0=0;a0<aZ.length;a0++){aX+="|"+aZ[a0]}}aX+=")( |$)";return new RegExp(aX)}function aT(a0,aX,a1){if(!a1){return"link"}var aZ=aB(aI,"download"),aY=aB(aL,"link"),a2=new RegExp("\\.("+ak+")([?&#]|$)","i");return aY.test(a0)?"link":(aZ.test(a0)||a2.test(aX)?"download":0)}function Y(a2){var a0,aY,aX;while((a0=a2.parentNode)!==null&&r(a0)&&((aY=a2.tagName.toUpperCase())!=="A"&&aY!=="AREA")){a2=a0}if(r(a2.href)){var a3=a2.hostname||b(a2.href),a4=a3.toLowerCase(),aZ=a2.href.replace(a3,a4),a1=new RegExp("^(javascript|vbscript|jscript|mocha|livescript|ecmascript|mailto):","i");if(!a1.test(aZ)){aX=aT(a2.className,aZ,az(a4));if(aX){aZ=d(aZ);ai(aZ,aX)}}}}function af(aX){var aY,aZ;aX=aX||x.event;aY=aX.which||aX.button;aZ=aX.target||aX.srcElement;if(aX.type==="click"){if(aZ){Y(aZ)}}else{if(aX.type==="mousedown"){if((aY===1||aY===2)&&aZ){aR=aY;
ay=aZ}else{aR=ay=null}}else{if(aX.type==="mouseup"){if(aY===aR&&aZ===ay){Y(aZ)}aR=ay=null}}}}function aM(aY,aX){if(aX){J(aY,"mouseup",af,false);J(aY,"mousedown",af,false)}else{J(aY,"click",af,false)}}function ax(aY){if(!aA){aA=true;var aZ,aX=aB(S,"ignore"),a0=p.links;if(a0){for(aZ=0;aZ<a0.length;aZ++){if(!aX.test(a0[aZ].className)){aM(a0[aZ],aY)}}}}}function ag(){var aX,aY,aZ={pdf:"application/pdf",qt:"video/quicktime",realp:"audio/x-pn-realaudio-plugin",wma:"application/x-mplayer2",dir:"application/x-director",fla:"application/x-shockwave-flash",java:"application/x-java-vm",gears:"application/x-googlegears",ag:"application/x-silverlight"};if(c.mimeTypes&&c.mimeTypes.length){for(aX in aZ){if(Object.prototype.hasOwnProperty.call(aZ,aX)){aY=c.mimeTypes[aZ[aX]];av[aX]=(aY&&aY.enabledPlugin)?"1":"0"}}}if(typeof navigator.javaEnabled!=="unknown"&&r(c.javaEnabled)&&c.javaEnabled()){av.java="1"}if(n(x.GearsFactory)){av.gears="1"}av.res=A.width+"x"+A.height;av.cookie=aC()}ag();al();return{getVisitorId:function(){return(R())[1]
},getVisitorInfo:function(){return R()},setTrackerUrl:function(aX){ae=aX},setSiteId:function(aX){aV=aX},setLinkTrackingTimer:function(aX){ad=aX},setDownloadExtensions:function(aX){ak=aX},addDownloadExtensions:function(aX){ak+="|"+aX},setDomains:function(aX){aH=j(aX)?[aX]:aX;aH.push(aa)},setIgnoreClasses:function(aX){S=j(aX)?[aX]:aX},setReferrerUrl:function(aX){aG=aX},setCustomUrl:function(aX){aO=aj(Z,aX)},setDocumentTitle:function(aX){aU=aX},setDownloadClasses:function(aX){aI=j(aX)?[aX]:aX},setLinkClasses:function(aX){aL=j(aX)?[aX]:aX},discardHashTag:function(aX){aq=aX},setCookieNamePrefix:function(aX){aJ=aX},setCookieDomain:function(aX){W=t(aX);al()},setCookiePath:function(aX){aF=aX;al()},setVisitorCookieTimeout:function(aX){aW=aX*1000},setSessionCookieTimeout:function(aX){ah=aX*1000},setReferralCookieTimeout:function(aX){ac=aX*1000},setDoNotTrack:function(aY){var aX=c.doNotTrack||c.msDoNotTrack;P=aY&&(aX==="yes"||aX==="1")},addListener:function(aY,aX){aM(aY,aX)},enableLinkTracking:function(aX){if(m){ax(aX)
}else{v.push(function(){ax(aX)})}},setHeartBeatTimer:function(aZ,aY){var aX=new Date();N=aX.getTime()+aZ*1000;an=aY*1000},killFrame:function(){if(x.location!==x.top.location){x.top.location=x.location}},redirectFile:function(aX){if(x.location.protocol==="file:"){x.location=aX}},setCountPreRendered:function(aX){aw=aX},trackLink:function(aY,aX){ar(function(){ai(aY,aX)})},trackPageView:function(aX){ar(function(){L(aX)})},setAccount:function(aX){ae=M(aX)},trackEvent:function(aY,a1,aX,a0,aZ){aD(aY,a1,aX,a0,aZ)},trackImpression:function(a0,aX,aZ,aY){ao(a0,aX,aZ,aY)}}}function q(){return{push:G}}J(x,"beforeunload",H,false);k();Date.prototype.getTimeAlias=Date.prototype.getTime;B=new u();for(D=0;D<_snaq.length;D++){G(_snaq[D])}_snaq=new q();return{addPlugin:function(i,L){a[i]=L},getTracker:function(i){return new u(i)},getAsyncTracker:function(){return B}}}());